---
title: День 3. Сети. Advanced
tags: innoctf-junior-2019
---

# Сети, но пожестче

## Mac-Адрес
- По нему адресуются хосты
- Форма: AA:BB:CC:DD:EE:FF
- Зашит производителем
    - Меняется

## Модель OSI, TCP/IP
**OSI** древняя, как непонятно что.

**TCP/IP** обобщает *Application*, *Presentation*, *Session* в *Application* и обобщает *Data Link* и *Physical* в *Link*.
Позже одумались и разъединили *Link* в *Data Link* и *Physical*.

## L1 -- Physical
- Ethernet
- IEEE 802.11 *(Wi-Fi)*
- Bluetooth

### Ethernet
- Обычно -- витая пара
- Внутри - 4 спирали по 2 жилы

### IEEE 802.11
- WiFi
- Чем ближе к точке - тем лучше сигнал
- Шифрования:
    - WEP -- общий ключ у всех. Ломается
    - WPA2 -- ломается, но сессионый ключ устанавливается по TLS Диффи-Хеллманом, потому проблемно

### Снифаем ethernet
1. Юзаем wireshark
2. Если сетевуха шалит -- `ifconfig eth0 promisc`

## L2 -- Data-Link
- Происходит обмен фреймами
- Происходит по MAC-ам сети

## L3 -- Network
- IP *(Internet Protocol)*
- ICMP *(Internet Control Message Protocol)* -- сообщения об ошибках
- IGMP -- Internet Group Management Protocol
- ARP *(Address Resolution Protocol)* -- сокрытие MAC-адреса
- IP Secutiry -- IPSec
- Routing IP -- Роутинг в IP

### IP
- IP-адрес состоит из 4 октетов
    - 1 октет состоит из 8 бит
- Для передачи пакетов используются *таблицы роутинга*
    - `ip route list` -- для получения правил адресации
- Бывают приватные и публичные диапозоны. Приватные диапозоны
    - 192.168.0.0/16
    - 10.0.0.0/8
- Виды отправлений
    - *Broadcast* -- всем
    - *Multicats* -- группе
    - *Unicast* -- определенной машине
### Как получить маршруты?
Использовать протокол роутинга
- **Routing IP** *(RIP)*
- **Open Shortest Path First** *(OSPF)*
- **Border Gateway Protocol** *(BGP)*

#### OSPF
- Используется алгоритм Дейкстры
- Метрика -- ширина канала
- Подвержен атаке 51%

#### BGP
- Имеет огромное количество расширений
- Обладает полным контролем над происходящим
- Уязвим
    - Чувак отправил BGP-запрос провайдеру и вырубил 1/5 интернета
- Контролируется **BGP Community**

### IP & MAC
- Соотносятся протоколом *ARP*
- Уязвим **ARP-спуфингу**

## L4
- *UDP* -- **Unreliable Datagram Protocol**
- *TCP* -- **Transmission Control Protocol**

## L4.5 -- SSL, TLS

## L5 -- Application
- Discover не спуфится нормально, т.к. *ACK*-запросы слишком быстро идут
- 


## Типы топологии сети
### Bus
Имеется длинный провод, ограниченный *терминаторами*. К проводу подключаются компьютеры. *Терминатор* при получении сообщений отправляют обратно. Easy DoS.

### Star
Имеется *хаб*, к нему подключаются все клиенты

### Ring
Клиенты объединяются в кольцо, пакеты ходят по кольцу
